{
  "round_metrics": [
    {
      "round": 1,
      "num_participating_clients": 5,
      "num_successful_clients": 5,
      "train_accuracy": 0.9808657407407407,
      "train_loss": 0.05671146450291251,
      "test_accuracy": 0.9657,
      "test_loss": 0.27568175189030436,
      "test_f1_score": 0.9154547695341385,
      "test_precision": 0.9804646251319957,
      "test_recall": 0.8585298196948682,
      "detection_rate": 0.8585298196948682,
      "timestamp": "2025-06-30T17:34:58.645591"
    },
    {
      "round": 2,
      "num_participating_clients": 5,
      "num_successful_clients": 5,
      "train_accuracy": 0.9884398148148149,
      "train_loss": 0.0359451967580232,
      "test_accuracy": 0.99,
      "test_loss": 0.03991737443590745,
      "test_f1_score": 0.9767981438515081,
      "test_precision": 0.9804378202142524,
      "test_recall": 0.9731853906611189,
      "detection_rate": 0.9731853906611189,
      "timestamp": "2025-06-30T17:35:32.322058"
    },
    {
      "round": 3,
      "num_participating_clients": 5,
      "num_successful_clients": 5,
      "train_accuracy": 0.9922824074074074,
      "train_loss": 0.02424681508078234,
      "test_accuracy": 0.9924,
      "test_loss": 0.027427127751255463,
      "test_f1_score": 0.9823992589161649,
      "test_precision": 0.9842227378190255,
      "test_recall": 0.9805825242718447,
      "detection_rate": 0.9805825242718447,
      "timestamp": "2025-06-30T17:36:07.095452"
    }
  ],
  "client_weights": [
    {
      "round": 1,
      "weights": {
        "client_0": 0.25934831413734794,
        "client_1": 0.26555481394634833,
        "client_2": 0.11490926660344948,
        "client_3": 0.15428797217244475,
        "client_4": 0.2058996331404096
      },
      "timestamp": "2025-06-30T17:34:25.911686"
    },
    {
      "round": 2,
      "weights": {
        "client_0": 0.33440917614918864,
        "client_1": 0.05666400255976896,
        "client_2": 0.048537447500047515,
        "client_3": 0.030490068322038898,
        "client_4": 0.5298993054689559
      },
      "timestamp": "2025-06-30T17:34:58.645866"
    },
    {
      "round": 3,
      "weights": {
        "client_0": 0.27565871716168017,
        "client_1": 0.06708285764281788,
        "client_2": 0.1286692903508818,
        "client_3": 0.4461995605651917,
        "client_4": 0.08238957427942835
      },
      "timestamp": "2025-06-30T17:35:32.322729"
    }
  ],
  "training_logs": [
    {
      "event_type": "training_started",
      "timestamp": "2025-06-30T17:34:25.910600",
      "details": {
        "num_clients": 5,
        "num_rounds": 3,
        "baseline_mode": true
      }
    },
    {
      "event_type": "client_training_completed",
      "timestamp": "2025-06-30T17:34:32.041870",
      "details": {
        "client_id": "client_0",
        "round": 1,
        "metrics": {
          "loss": 0.05503822523711373,
          "accuracy": 0.98125,
          "training_time": 6.129047155380249,
          "effective_batch_size": 9,
          "epochs_completed": 4,
          "total_examples": 43200,
          "final_memory_mb": 6670.5,
          "final_cpu_percent": 0.0,
          "resource_constrained": true
        }
      }
    },
    {
      "event_type": "client_training_completed",
      "timestamp": "2025-06-30T17:34:39.478409",
      "details": {
        "client_id": "client_1",
        "round": 1,
        "metrics": {
          "loss": 0.05747799587826209,
          "accuracy": 0.9806018518518519,
          "training_time": 7.4359450340271,
          "effective_batch_size": 9,
          "epochs_completed": 4,
          "total_examples": 43200,
          "final_memory_mb": 6817.125,
          "final_cpu_percent": 0.0,
          "resource_constrained": true
        }
      }
    },
    {
      "event_type": "client_training_completed",
      "timestamp": "2025-06-30T17:34:45.710695",
      "details": {
        "client_id": "client_2",
        "round": 1,
        "metrics": {
          "loss": 0.05579786095177814,
          "accuracy": 0.981550925925926,
          "training_time": 6.231760740280151,
          "effective_batch_size": 9,
          "epochs_completed": 4,
          "total_examples": 43200,
          "final_memory_mb": 6787.8125,
          "final_cpu_percent": 0.0,
          "resource_constrained": true
        }
      }
    },
    {
      "event_type": "client_training_completed",
      "timestamp": "2025-06-30T17:34:51.871868",
      "details": {
        "client_id": "client_3",
        "round": 1,
        "metrics": {
          "loss": 0.06000880242192537,
          "accuracy": 0.9794212962962963,
          "training_time": 6.160767078399658,
          "effective_batch_size": 9,
          "epochs_completed": 4,
          "total_examples": 43200,
          "final_memory_mb": 6743.96875,
          "final_cpu_percent": 0.0,
          "resource_constrained": true
        }
      }
    },
    {
      "event_type": "client_training_completed",
      "timestamp": "2025-06-30T17:34:57.989197",
      "details": {
        "client_id": "client_4",
        "round": 1,
        "metrics": {
          "loss": 0.0552344380254832,
          "accuracy": 0.9815046296296296,
          "training_time": 6.1170268058776855,
          "effective_batch_size": 9,
          "epochs_completed": 4,
          "total_examples": 43200,
          "final_memory_mb": 6722.90625,
          "final_cpu_percent": 0.0,
          "resource_constrained": true
        }
      }
    },
    {
      "event_type": "aggregation_completed",
      "timestamp": "2025-06-30T17:34:57.991686",
      "details": {
        "round": 1,
        "num_clients_aggregated": 5
      }
    },
    {
      "event_type": "client_training_completed",
      "timestamp": "2025-06-30T17:35:05.228213",
      "details": {
        "client_id": "client_0",
        "round": 2,
        "metrics": {
          "loss": 0.03313625308227487,
          "accuracy": 0.9889583333333334,
          "training_time": 6.581342935562134,
          "effective_batch_size": 9,
          "epochs_completed": 4,
          "total_examples": 43200,
          "final_memory_mb": 6706.75,
          "final_cpu_percent": 0.0,
          "resource_constrained": true
        }
      }
    },
    {
      "event_type": "client_training_completed",
      "timestamp": "2025-06-30T17:35:11.670569",
      "details": {
        "client_id": "client_1",
        "round": 2,
        "metrics": {
          "loss": 0.036754747014723435,
          "accuracy": 0.9885416666666667,
          "training_time": 6.441279888153076,
          "effective_batch_size": 9,
          "epochs_completed": 4,
          "total_examples": 43200,
          "final_memory_mb": 6706.171875,
          "final_cpu_percent": 0.0,
          "resource_constrained": true
        }
      }
    },
    {
      "event_type": "client_training_completed",
      "timestamp": "2025-06-30T17:35:18.226374",
      "details": {
        "client_id": "client_2",
        "round": 2,
        "metrics": {
          "loss": 0.0397404461050719,
          "accuracy": 0.9875231481481481,
          "training_time": 6.555351734161377,
          "effective_batch_size": 9,
          "epochs_completed": 4,
          "total_examples": 43200,
          "final_memory_mb": 6705.03125,
          "final_cpu_percent": 0.0,
          "resource_constrained": true
        }
      }
    },
    {
      "event_type": "client_training_completed",
      "timestamp": "2025-06-30T17:35:25.119193",
      "details": {
        "client_id": "client_3",
        "round": 2,
        "metrics": {
          "loss": 0.03635292451562103,
          "accuracy": 0.9878703703703704,
          "training_time": 6.892367124557495,
          "effective_batch_size": 9,
          "epochs_completed": 4,
          "total_examples": 43200,
          "final_memory_mb": 6648.78125,
          "final_cpu_percent": 0.0,
          "resource_constrained": true
        }
      }
    },
    {
      "event_type": "client_training_completed",
      "timestamp": "2025-06-30T17:35:31.628063",
      "details": {
        "client_id": "client_4",
        "round": 2,
        "metrics": {
          "loss": 0.03374161307242474,
          "accuracy": 0.9893055555555555,
          "training_time": 6.507840156555176,
          "effective_batch_size": 9,
          "epochs_completed": 4,
          "total_examples": 43200,
          "final_memory_mb": 6659.859375,
          "final_cpu_percent": 0.0,
          "resource_constrained": true
        }
      }
    },
    {
      "event_type": "aggregation_completed",
      "timestamp": "2025-06-30T17:35:31.629916",
      "details": {
        "round": 2,
        "num_clients_aggregated": 5
      }
    },
    {
      "event_type": "client_training_completed",
      "timestamp": "2025-06-30T17:35:38.876699",
      "details": {
        "client_id": "client_0",
        "round": 3,
        "metrics": {
          "loss": 0.019405681102272,
          "accuracy": 0.9938888888888889,
          "training_time": 6.552823066711426,
          "effective_batch_size": 9,
          "epochs_completed": 4,
          "total_examples": 43200,
          "final_memory_mb": 6652.921875,
          "final_cpu_percent": 0.0,
          "resource_constrained": true
        }
      }
    },
    {
      "event_type": "client_training_completed",
      "timestamp": "2025-06-30T17:35:45.747079",
      "details": {
        "client_id": "client_1",
        "round": 3,
        "metrics": {
          "loss": 0.027151416529732013,
          "accuracy": 0.9913657407407407,
          "training_time": 6.8700270652771,
          "effective_batch_size": 9,
          "epochs_completed": 4,
          "total_examples": 43200,
          "final_memory_mb": 6634.640625,
          "final_cpu_percent": 0.0,
          "resource_constrained": true
        }
      }
    },
    {
      "event_type": "client_training_completed",
      "timestamp": "2025-06-30T17:35:52.750891",
      "details": {
        "client_id": "client_2",
        "round": 3,
        "metrics": {
          "loss": 0.028302717009691586,
          "accuracy": 0.9908796296296296,
          "training_time": 7.003255844116211,
          "effective_batch_size": 9,
          "epochs_completed": 4,
          "total_examples": 43200,
          "final_memory_mb": 6623.484375,
          "final_cpu_percent": 0.0,
          "resource_constrained": true
        }
      }
    },
    {
      "event_type": "client_training_completed",
      "timestamp": "2025-06-30T17:35:59.588405",
      "details": {
        "client_id": "client_3",
        "round": 3,
        "metrics": {
          "loss": 0.028166617486734945,
          "accuracy": 0.9910185185185185,
          "training_time": 6.836829900741577,
          "effective_batch_size": 9,
          "epochs_completed": 4,
          "total_examples": 43200,
          "final_memory_mb": 6635.125,
          "final_cpu_percent": 0.0,
          "resource_constrained": true
        }
      }
    },
    {
      "event_type": "client_training_completed",
      "timestamp": "2025-06-30T17:36:06.386184",
      "details": {
        "client_id": "client_4",
        "round": 3,
        "metrics": {
          "loss": 0.01820764327548116,
          "accuracy": 0.9942592592592593,
          "training_time": 6.797264099121094,
          "effective_batch_size": 9,
          "epochs_completed": 4,
          "total_examples": 43200,
          "final_memory_mb": 6654.5,
          "final_cpu_percent": 0.0,
          "resource_constrained": true
        }
      }
    },
    {
      "event_type": "aggregation_completed",
      "timestamp": "2025-06-30T17:36:06.387213",
      "details": {
        "round": 3,
        "num_clients_aggregated": 5
      }
    },
    {
      "event_type": "training_completed",
      "timestamp": "2025-06-30T17:36:07.799695",
      "details": {
        "total_rounds": 3,
        "final_metrics": {
          "accuracy": 0.9924,
          "precision": 0.9842227378190255,
          "recall": 0.9805825242718447,
          "f1_score": 0.9823992589161649,
          "detection_rate": 0.9805825242718447,
          "false_positive_rate": 0.004338394793926247,
          "true_negative_rate": 0.9956616052060737,
          "loss": 0.027427127751255463
        }
      }
    },
    {
      "event_type": "centralized_training_started",
      "timestamp": "2025-06-30T17:36:07.801440",
      "details": {
        "epochs": 5,
        "learning_rate": 0.001,
        "device": "cpu"
      }
    },
    {
      "event_type": "centralized_training_completed",
      "timestamp": "2025-06-30T17:36:35.737776",
      "details": {
        "final_metrics": {
          "accuracy": 0.9924,
          "precision": 0.9878447872837774,
          "recall": 0.9768839574664817,
          "f1_score": 0.9823337982333797,
          "detection_rate": 0.9768839574664817,
          "false_positive_rate": 0.0033175960188847773,
          "true_negative_rate": 0.9966824039811152,
          "loss": 0.03160144696694758
        }
      }
    }
  ],
  "final_metrics": {
    "federated": {
      "accuracy": 0.9924,
      "precision": 0.9842227378190255,
      "recall": 0.9805825242718447,
      "f1_score": 0.9823992589161649,
      "detection_rate": 0.9805825242718447,
      "false_positive_rate": 0.004338394793926247,
      "true_negative_rate": 0.9956616052060737,
      "loss": 0.027427127751255463
    },
    "centralized": {
      "accuracy": 0.9924,
      "precision": 0.9878447872837774,
      "recall": 0.9768839574664817,
      "f1_score": 0.9823337982333797,
      "detection_rate": 0.9768839574664817,
      "false_positive_rate": 0.0033175960188847773,
      "true_negative_rate": 0.9966824039811152,
      "loss": 0.03160144696694758
    }
  },
  "dataset_stats": {
    "train_size": 54000,
    "val_size": 6000,
    "test_size": 10000,
    "anomaly_digits": [
      1,
      7
    ],
    "total_samples": 70000,
    "train_normal_estimated": 42390,
    "train_anomaly_estimated": 11610,
    "val_normal_estimated": 4692,
    "val_anomaly_estimated": 1308,
    "test_normal_estimated": 7520,
    "test_anomaly_estimated": 2480
  },
  "experiment_config": {
    "model": {
      "type": "MLP",
      "mlp": {
        "input_dim": 784,
        "hidden_dims": [
          256,
          128,
          64
        ],
        "output_dim": 2
      },
      "lstm": {
        "input_dim": 784,
        "hidden_dim": 128,
        "num_layers": 2,
        "output_dim": 2
      }
    },
    "client": {
      "learning_rate": 0.001,
      "batch_size": 32,
      "local_epochs": 5,
      "optimizer": "Adam"
    },
    "federated": {
      "num_clients": 5,
      "num_rounds": 3,
      "fraction_fit": 0.8,
      "fraction_evaluate": 0.2,
      "min_fit_clients": 5,
      "min_evaluate_clients": 2,
      "min_available_clients": 5,
      "strategy": "FedAdam",
      "strategy_config": {
        "eta": 0.001,
        "eta_l": 0.001,
        "beta_1": 0.9,
        "beta_2": 0.999,
        "tau": 0.001
      },
      "iot_config": {
        "max_memory_mb": 512,
        "max_cpu_percent": 70,
        "connection_timeout": 30,
        "resource_monitoring": true,
        "adaptive_batch_size": true,
        "min_batch_size": 8,
        "max_batch_size": 64
      }
    },
    "trust": {
      "enabled": true,
      "trust_threshold": 0.7,
      "trust_decay_factor": 0.95,
      "reputation_weight": 0.3
    },
    "data": {
      "dataset_type": "mnist",
      "data_dir": "data/MNIST",
      "download": true,
      "anomaly_digits": [
        1,
        7
      ],
      "target_column": "label",
      "feature_columns": [],
      "test_size": 0.2,
      "validation_size": 0.1,
      "random_state": 42,
      "normalize": true,
      "handle_missing": "mean",
      "num_workers": 0,
      "dataset_size": 5000,
      "anomaly_ratio": 0.1,
      "distribution": "iid"
    },
    "training": {
      "device": "auto",
      "seed": 42,
      "epochs": 5,
      "early_stopping": true,
      "patience": 10,
      "save_checkpoints": true,
      "checkpoint_dir": "checkpoints"
    },
    "logging": {
      "level": "INFO",
      "log_file": "training.log",
      "log_metrics": true,
      "log_frequency": 10
    },
    "metrics": [
      "accuracy",
      "precision",
      "recall",
      "f1_score",
      "auc"
    ],
    "anomaly_detection": {
      "threshold": 0.5,
      "contamination": 0.1,
      "method": "classification"
    },
    "experiment": {
      "name": "trust_mcnet_mnist_baseline",
      "description": "MNIST anomaly detection with random weight aggregation",
      "baseline_mode": true,
      "save_results": true,
      "results_dir": "results",
      "log_level": "INFO",
      "save_plots": true,
      "plot_format": "png",
      "metrics": [
        "accuracy",
        "precision",
        "recall",
        "f1_score",
        "detection_rate"
      ],
      "shap_analysis": true,
      "shap_samples": 100
    }
  }
}